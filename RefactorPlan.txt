Outstanding refactor tasks (completed items removed)

1) Shim cleanup and import convergence
- Remove remaining legacy wv_* shims once all imports are migrated to models/parser/flows/render (verify no references remain).
- Update tooling scripts (pre-commit, build_examples, CI) to avoid legacy paths.
- Track removal in Refactor.log.

2) Coverage hardening
- Raise coverage for lower modules: models/colors, models/cable, models/bom, models/dataclasses, models/utils, render/graphviz, parser/yaml_loader (edge cases).
- Add parser edge-case tests and render smoke tests as needed.

3) Pydantic migration (remaining classes)
- Migrate dataclasses (Component/Connector/Cable/BOM/color helpers) to Pydantic BaseModels stepwise, keeping compatibility until imports are updated.
- Propagate BaseModels into flows/build_harness and CLI once stable; add regression tests.

4) Config/graph modeling (config and template inputs)
- Add/configure ConnectorConfig/CableConfig/... models for YAML-facing config with round-trip tests.
- Add template-input models and mappings; build small graph representation and mapping to template inputs.
- Wire flows to accept config models then convert to BaseModels/dataclasses.

5) Rendering module split and templating audit
- Finish splitting render/output responsibilities (html/pdf/assets) and audit templating vs. code-built strings.
- Add lightweight render tests to exercise template loading and HTML helpers.

6) Release/publish documentation and hygiene
- Document tag-triggered release workflow and how semantic-release feeds it.
- Ensure changelog generation remains tied to semantic-release runs; keep GH token/PyPI token notes current.

7) Config and graph features (from NEXT_FEATURES)
- Introduce Config BaseModels (ConnectorConfig, CableConfig, WireConfig, ConnectionConfig, MetadataConfig, PageOptionsConfig, PinConfig) with round-trip YAML tests.
- Add template-input models (TemplateConnector/TemplateCable/TemplateBOMItem, etc.) and conversions from config/dataclasses.
- Build a small graph representation (nodes/edges for pins/interfaces/bundles/segments) and map to template-input models with tests.
- Incrementally wire dataclasses/flows to accept config models while keeping legacy behavior; add regression tests for BOM/HTML/TSV parity.

8) Pydantic config tightening
- Remove `arbitrary_types_allowed` usage across models by replacing with proper type wrappers/converters; do this after remaining migrations stabilize.

9) BOM and wiring correctness
- Add loopback support to capture length/gauge for BOM when cables aren’t used explicitly.
- Ensure splices from connectors with differing gauges land in the BOM (e.g., M80 24 AWG to 20 AWG load cables) and surface “splice near connector” guidance.
- Add a cables overview section summarizing cable runs and key attributes.

10) Layout polish
- Make per-page notes width configurable. ✅
- Prevent BOM rows with distributor + distributor P/N from overflowing into adjacent sections. ✅
- Show harness name alongside harness ID wherever rendered.
- Improve rendering when two connector lines merge into one pin through a cable to avoid “bubble” artifacts.
- Guard against overlapping sections (notes covering diagrams, BOM covering changelog) when content is larger than expected.

11) BOM pagination and derivative diagrams
- Add option to force BOM onto a single page; add optional multi-page BOM splitting (configurable rows per page) with lettered page suffixes in page numbering (a, b, c, …).
- Introduce reusable table model shared by BOM, wire cut diagram, and termination diagram. (Base model added; integrate into rendering.)
- Add per-harness wire cut diagram (HTML table) with optional multi-page splitting (configurable rows/page) and lettered suffixes in page numbering.
- Add per-harness termination diagram (HTML table) capturing splices/crimps and lengths; support multi-page splitting and lettered suffixes.
- Add a BaseModel for termination details, allowing per-wire-end/connection definitions into connectors.
